---
import FloatingElements from "../components/background/FloatingElements.astro";
import ContactForm from "../components/ContactForm.astro";
import Paragraph from "../components/typography/Paragraph.astro";
import DecorativeAccent from "../components/base/DecorativeAccent.astro";
import Title from "../components/typography/Title.astro";
import CardGlassB from "../components/CardGlassB.astro";

const contactInfo = [
  {
    icon: "mdi:email-outline",
    label: "Email",
    value: "xamperu3@gmail.com",
  },
  {
    icon: "mdi:map-marker-outline",
    label: "Location",
    value: "Lima, Peru",
  },
  {
    icon: "mdi:clock-outline",
    label: "Response Time",
    value: "Within 24 hours",
  },
];
---

<section id="contact" class="relative min-h-dvh p-4 lg:p-8 overflow-hidden">
  <div
    class="relative max-w-7xl mx-auto grid gap-12 lg:grid-cols-2 lg:gap-16 lg:items-center min-h-dvh py-12 lg:py-0"
  >
    <header class="relative z-10">
      <div class="space-y-6">
        <DecorativeAccent />

        <Title id="contact-title"> Get in touch </Title>

        <Paragraph id="contact-description">
          Do you have a project or want to develop one? Fill out the form and I
          will get in touch with you soon.
        </Paragraph>

        <div class="space-y-4 mt-12">
          {
            contactInfo.map((info) => (
              <CardGlassB
                icon={info.icon}
                label={info.label}
                value={info.value}
              />
            ))
          }
        </div>

        <FloatingElements />
      </div>
    </header>

    <div class="contact-form relative z-10">
      <ContactForm />
    </div>
  </div>
</section>

<script>
  import { createRevealSectionTL } from "../utils/createRevealSectionTL";
  import { gsap } from "../utils/gsapConfig";
  import { $ } from "../utils/selectors";

  function animateContactSection() {
    const cardsEl = gsap.utils.toArray(".card-info");
    const formEl = $(".contact-form");
    const tl = createRevealSectionTL("#contact-title", "#contact-description");

    if (cardsEl.length === 0 || !formEl || !tl) {
      return;
    }

    tl.fromTo(
      cardsEl,
      { opacity: 0, y: 20 },
      {
        opacity: 1,
        y: 0,
        duration: 0.2,
        stagger: 0.1,
        ease: "power3.out",
      },
      "<"
    ).fromTo(
      formEl,
      { opacity: 0, x: 50 },
      {
        opacity: 1,
        x: 0,
        transformOrigin: "left",
        ease: "power3.out",
        stagger: 0.15,
      },
      "<"
    );
  }

  animateContactSection();
</script>
