---
import Title from "../components/typography/Title.astro";
import Paragraph from "../components/typography/Paragraph.astro";
import DecorativeAccent from "../components/base/DecorativeAccent.astro";
import GridFramewrokCards from "../components/GridFramewrokCards.astro";
import CardGlassA from "../components/CardGlassA.astro";
import { getTranslations } from "../i18n/utils";
import { ui } from "../i18n/ui";

const lang = Astro.currentLocale as "es" | "en";
const extraProjects = ui[lang].extraProjects;
const t = getTranslations(lang);

const statsData = [
  {
    value: "3+",
    label: "Frameworks",
    gradient: "bg-linear-to-r from-cyan-400 to-blue-400",
  },
  {
    value: "100%",
    label: lang === "es" ? "Pasión" : "Passion",
    gradient: "bg-linear-to-r from-purple-400 to-pink-400",
  },
];
---

<section
  id="extras"
  class="extras-section relative min-h-dvh content-center overflow-hidden py-20 lg:py-0"
>
  <div class="relative max-w-7xl mx-auto px-4 lg:px-8">
    <div class="grid h-full lg:grid-cols-2 gap-12 lg:gap-16 lg:items-center">
      <header class="extras-header space-y-6">
        <DecorativeAccent />
        <Title id="extras-title"> Extras </Title>

        <Paragraph id="extras-description">
          {
            lang === "es"
              ? "Sigue explorando: estos proyectos también cuentan mi historia como desarrollador."
              : "Keep exploring: these projects also tell my story as a developer."
          }
        </Paragraph>

        <div class="stats-grid hidden lg:grid lg:grid-cols-2 gap-4 mt-12">
          {
            statsData.map(({ value, label, gradient }) => (
              <CardGlassA value={value} label={label} gradient={gradient} />
            ))
          }
        </div>
      </header>

      <GridFramewrokCards extras={extraProjects} />
    </div>
  </div>
</section>

<script>
  import { gsap } from "../utils/gsapConfig";
  import { createRevealSectionTL } from "../utils/createRevealSectionTL";

  function animateExtrasSection() {
    const cardsFrameworks = gsap.utils.toArray<HTMLElement>(".card-framework");
    const cardStats = gsap.utils.toArray<HTMLElement>(".stats-card");
    const mainTl = createRevealSectionTL(
      "#extras-title",
      "#extras-description"
    );

    if (!cardsFrameworks.length || !cardStats.length || !mainTl) return;

    mainTl
      .fromTo(
        cardStats,
        { opacity: 0, y: 20 },
        {
          opacity: 1,
          y: 0,
          duration: 0.2,
          stagger: 0.1,
          ease: "power3.out",
        },
        "<"
      )
      .fromTo(
        cardsFrameworks,
        { opacity: 0, x: 50 },
        {
          opacity: 1,
          x: 0,
          transformOrigin: "left",
          ease: "power3.out",
          stagger: 0.15,
        },
        "<"
      );
  }

  animateExtrasSection();
</script>
